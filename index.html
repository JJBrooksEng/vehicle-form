<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Vehicle Damage Form</title>
  <style>
    form { max-width: 600px; margin: auto; font-family: sans-serif; }
    label { display: block; margin-top: 10px; }
    canvas { display: block; margin-top: 15px; border: 1px solid #000; }
    button { margin-top: 15px; padding: 10px 15px; }
  </style>
</head>
<body>
  <form id="damage-form">
    <label>Customer Name: <input type="text" name="customerName" required></label>
    <label>Contact Number: <input type="text" name="contactNumber"></label>
    <label>Email Address: <input type="email" name="email"></label>
    <label>Vehicle Make: <input type="text" name="vehicleMake"></label>
    <label>Vehicle Model: <input type="text" name="vehicleModel"></label>
    <label>Vehicle Registration: <input type="text" name="vehicleReg"></label>
    <label>Description of Repairs Required:<br><textarea name="repairDescription"></textarea></label>
    <label>Replacement Parts Required:<br><textarea name="replacementParts"></textarea></label>
    <label>Paint Type: <input type="text" name="paintType"></label>
    <label>Estimated Workshop Hours: <input type="text" name="estimatedHours"></label>
    <label>Dates Available: <input type="text" name="availableDates"></label>
    <label>Price Agreed (if applicable): <input type="text" name="priceAgreed"></label>

    <label>Draw damage area below:</label>
    <canvas id="damageCanvas" width="500" height="300"></canvas>

    <button type="button" onclick="submitForm()">Submit</button>
  </form>

  <script>
    // Simple canvas drawing setup
    const canvas = document.getElementById('damageCanvas');
    const ctx = canvas.getContext('2d');
    let drawing = false;

    canvas.addEventListener('mousedown', () => drawing = true);
    canvas.addEventListener('mouseup', () => drawing = false);
    canvas.addEventListener('mouseout', () => drawing = false);
    canvas.addEventListener('mousemove', draw);

    function draw(event) {
      if (!drawing) return;
      const rect = canvas.getBoundingClientRect();
      const x = event.clientX - rect.left;
      const y = event.clientY - rect.top;
      ctx.fillStyle = 'red';
      ctx.beginPath();
      ctx.arc(x, y, 4, 0, 2 * Math.PI);
      ctx.fill();
    }

    function submitForm() {
      const form = document.getElementById('damage-form');
      const formData = new FormData(form);

      const imageDataURL = canvas.toDataURL('image/png');
      formData.append('imageDataURL', imageDataURL);

      fetch("https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID_HERE/exec", {
        method: "POST",
        body: formData
      })
      .then(response => response.text())
      .then(data => alert("Form submitted successfully."))
      .catch(error => alert("Submission failed: " + error));
    }
  </script>
</body>
</html>
