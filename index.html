<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Vehicle Damage Form</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f7f7;
      padding: 20px;
    }
    form {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      max-width: 600px;
      margin: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
    }
    input[type="text"],
    input[type="email"],
    textarea {
      width: 100%;
      padding: 8px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    canvas {
      display: block;
      margin: 10px 0;
      border: 1px solid #000;
    }
    button {
      padding: 10px 15px;
      background: #007BFF;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>
  <form id="damage-form">
    <label for="customerName">Customer Name:</label>
    <input type="text" name="customerName" id="customerName" required>

    <label for="contactNumber">Contact Number:</label>
    <input type="text" name="contactNumber" id="contactNumber">

    <label for="email">Email Address:</label>
    <input type="email" name="email" id="email">

    <label for="vehicleMake">Vehicle Make:</label>
    <input type="text" name="vehicleMake" id="vehicleMake">

    <label for="vehicleModel">Vehicle Model:</label>
    <input type="text" name="vehicleModel" id="vehicleModel">

    <label for="vehicleReg">Vehicle Registration:</label>
    <input type="text" name="vehicleReg" id="vehicleReg">

    <label for="repairDescription">Description of Repairs Required:</label>
    <textarea name="repairDescription" id="repairDescription"></textarea>

    <label for="replacementParts">Replacement Parts Required:</label>
    <textarea name="replacementParts" id="replacementParts"></textarea>

    <label for="paintType">Paint Type (Pearl, Metallic etc):</label>
    <input type="text" name="paintType" id="paintType">

    <label for="estimatedHours">Estimated Workshop Hours:</label>
    <input type="text" name="estimatedHours" id="estimatedHours">

    <label for="availableDates">Dates Available:</label>
    <input type="text" name="availableDates" id="availableDates">

    <label for="priceAgreed">Price agreed if applicable:</label>
    <input type="text" name="priceAgreed" id="priceAgreed">

    <label>Mark Damage on Diagram Below:</label>
    <canvas id="damageCanvas" width="500" height="300"></canvas>

    <button type="button" onclick="submitForm()">Submit</button>
  </form>

  <script>
    const canvas = document.getElementById('damageCanvas');
    const ctx = canvas.getContext('2d');
    let drawing = false;
    let lastX = 0;
    let lastY = 0;

    canvas.addEventListener('mousedown', (e) => {
      drawing = true;
      [lastX, lastY] = [e.offsetX, e.offsetY];
    });

    canvas.addEventListener('mouseup', () => drawing = false);
    canvas.addEventListener('mouseout', () => drawing = false);

    canvas.addEventListener('mousemove', (e) => {
      if (!drawing) return;
      ctx.strokeStyle = 'red';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(lastX, lastY);
      ctx.lineTo(e.offsetX, e.offsetY);
      ctx.stroke();
      [lastX, lastY] = [e.offsetX, e.offsetY];
    });

    function submitForm() {
      const form = document.getElementById('damage-form');
      const formData = new FormData(form);

      const imageDataURL = canvas.toDataURL('image/png');
      formData.append('imageDataURL', imageDataURL);

      fetch("https://script.google.com/macros/s/AKfycbzp7mV1TmBJBOrgXg78CQUeK-c9UUQpTFkbz5jGkDEJVSeFRxd9Sv9N1vMqi8_DqT0h/exec", {
        method: "POST",
        body: formData
      })
      .then(response => response.text())
      .then(data => alert("Form submitted successfully."))
      .catch(error => alert("Submission failed: " + error));
    }
  </script>
</body>
</html>
